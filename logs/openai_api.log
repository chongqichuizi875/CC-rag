2023-11-15 09:05:41 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m410386[0m]
2023-11-15 09:05:41 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:05:41 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:05:41 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:20000[0m (Press CTRL+C to quit)
2023-11-15 09:05:45 | INFO | stdout | [32mINFO[0m:     127.0.0.1:36728 - "[1mGET / HTTP/1.1[0m" [31m404 Not Found[0m
2023-11-15 09:05:45 | INFO | stdout | [32mINFO[0m:     127.0.0.1:36728 - "[1mGET /favicon.ico HTTP/1.1[0m" [31m404 Not Found[0m
2023-11-15 09:06:29 | INFO | stdout | [32mINFO[0m:     127.0.0.1:37500 - "[1mGET / HTTP/1.1[0m" [31m404 Not Found[0m
2023-11-15 09:06:29 | INFO | stdout | [32mINFO[0m:     127.0.0.1:37500 - "[1mGET /favicon.ico HTTP/1.1[0m" [31m404 Not Found[0m
2023-11-15 09:10:32 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m412264[0m]
2023-11-15 09:10:32 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:10:32 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:10:32 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:20000[0m (Press CTRL+C to quit)
2023-11-15 09:13:48 | INFO | stdout | [32mINFO[0m:     127.0.0.1:47872 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 09:15:04 | INFO | stdout | [32mINFO[0m:     127.0.0.1:51856 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 09:16:31 | INFO | stdout | [32mINFO[0m:     127.0.0.1:53986 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 09:33:29 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m436277[0m]
2023-11-15 09:33:29 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:33:29 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:33:29 | ERROR | stderr | [31mERROR[0m:    [Errno 98] error while attempting to bind on address ('0.0.0.0', 20000): address already in use
2023-11-15 09:33:29 | ERROR | stderr | [32mINFO[0m:     Waiting for application shutdown.
2023-11-15 09:33:29 | ERROR | stderr | [32mINFO[0m:     Application shutdown complete.
2023-11-15 09:35:26 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m440227[0m]
2023-11-15 09:35:26 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:35:26 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:35:26 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:19999[0m (Press CTRL+C to quit)
2023-11-15 09:36:46 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m442966[0m]
2023-11-15 09:36:46 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:36:46 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:36:46 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:30000[0m (Press CTRL+C to quit)
2023-11-15 09:38:13 | INFO | stdout | [32mINFO[0m:     127.0.0.1:42044 - "[1mGET / HTTP/1.1[0m" [31m404 Not Found[0m
2023-11-15 09:38:13 | INFO | stdout | [32mINFO[0m:     127.0.0.1:42044 - "[1mGET /favicon.ico HTTP/1.1[0m" [31m404 Not Found[0m
2023-11-15 09:39:08 | INFO | stdout | [32mINFO[0m:     127.0.0.1:60706 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 09:40:11 | INFO | stdout | [32mINFO[0m:     127.0.0.1:58686 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 09:49:10 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m470909[0m]
2023-11-15 09:49:10 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:49:10 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:49:10 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:30000[0m (Press CTRL+C to quit)
2023-11-15 09:52:27 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m477613[0m]
2023-11-15 09:52:27 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:52:27 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:52:27 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:30000[0m (Press CTRL+C to quit)
2023-11-15 09:56:59 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m487403[0m]
2023-11-15 09:56:59 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 09:56:59 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 09:56:59 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:30000[0m (Press CTRL+C to quit)
2023-11-15 10:02:02 | INFO | stdout | [32mINFO[0m:     127.0.0.1:50924 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:03:05 | INFO | stdout | [32mINFO[0m:     127.0.0.1:47746 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:03:37 | INFO | stdout | [32mINFO[0m:     127.0.0.1:60798 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:04:37 | INFO | stdout | [32mINFO[0m:     127.0.0.1:56786 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:06:37 | INFO | stdout | [32mINFO[0m:     127.0.0.1:59292 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:07:59 | INFO | stdout | [32mINFO[0m:     127.0.0.1:34720 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:11:17 | INFO | stdout | [32mINFO[0m:     127.0.0.1:50790 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:12:51 | INFO | stdout | [32mINFO[0m:     127.0.0.1:47500 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:17:25 | INFO | stdout | [32mINFO[0m:     127.0.0.1:53422 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:17:25 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:17:25 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:17:25 | ERROR | stderr |     yield
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:17:25 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:17:25 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:17:25 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:17:25 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:17:25 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:17:25 | ERROR | stderr | 
2023-11-15 10:17:25 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:17:25 | ERROR | stderr | 
2023-11-15 10:17:25 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:17:25 | ERROR | stderr |     yield
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:17:25 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:17:25 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:17:25 | ERROR | stderr |     raise exc
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:17:25 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:17:25 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:17:25 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:17:25 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:17:25 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:17:25 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:17:25 | ERROR | stderr | 
2023-11-15 10:17:25 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:17:25 | ERROR | stderr | 
2023-11-15 10:17:25 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:17:25 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     raise exc
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     raise exc
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     raise e
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:17:25 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:17:25 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:17:25 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:17:25 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:17:25 | ERROR | stderr |     await func()
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:17:25 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:17:25 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:17:25 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:17:25 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:17:25 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:17:25 | ERROR | stderr |     yield part
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:17:25 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:17:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:17:25 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:17:25 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:19:52 | INFO | stdout | [32mINFO[0m:     127.0.0.1:36734 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:19:53 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:19:53 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:19:53 | ERROR | stderr |     yield
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:19:53 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:19:53 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:19:53 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:19:53 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:19:53 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:19:53 | ERROR | stderr | 
2023-11-15 10:19:53 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:19:53 | ERROR | stderr | 
2023-11-15 10:19:53 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:19:53 | ERROR | stderr |     yield
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:19:53 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:19:53 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:19:53 | ERROR | stderr |     raise exc
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:19:53 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:19:53 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:19:53 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:19:53 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:19:53 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:19:53 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:19:53 | ERROR | stderr | 
2023-11-15 10:19:53 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:19:53 | ERROR | stderr | 
2023-11-15 10:19:53 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:19:53 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     raise exc
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     raise exc
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     raise e
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:19:53 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:19:53 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:19:53 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:19:53 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:19:53 | ERROR | stderr |     await func()
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:19:53 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:19:53 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:19:53 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:19:53 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:19:53 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:19:53 | ERROR | stderr |     yield part
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:19:53 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:19:53 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:19:53 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:19:53 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:25:35 | INFO | stdout | [32mINFO[0m:     127.0.0.1:54720 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:25:36 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:25:36 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:25:36 | ERROR | stderr |     yield
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:25:36 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:25:36 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:25:36 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:25:36 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:25:36 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:25:36 | ERROR | stderr | 
2023-11-15 10:25:36 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:25:36 | ERROR | stderr | 
2023-11-15 10:25:36 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:25:36 | ERROR | stderr |     yield
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:25:36 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:25:36 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:25:36 | ERROR | stderr |     raise exc
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:25:36 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:25:36 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:25:36 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:25:36 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:25:36 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:25:36 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:25:36 | ERROR | stderr | 
2023-11-15 10:25:36 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:25:36 | ERROR | stderr | 
2023-11-15 10:25:36 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:25:36 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     raise exc
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     raise exc
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     raise e
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:25:36 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:25:36 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:25:36 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:25:36 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:25:36 | ERROR | stderr |     await func()
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:25:36 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:25:36 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:25:36 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:25:36 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:25:36 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:25:36 | ERROR | stderr |     yield part
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:25:36 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:25:36 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:25:36 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:25:36 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:27:45 | INFO | stdout | [32mINFO[0m:     127.0.0.1:34146 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:28:29 | INFO | stdout | [32mINFO[0m:     127.0.0.1:41032 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:29:22 | INFO | stdout | [32mINFO[0m:     127.0.0.1:54248 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:29:43 | INFO | stdout | [32mINFO[0m:     127.0.0.1:40144 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:32:24 | INFO | stdout | [32mINFO[0m:     127.0.0.1:46684 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:32:24 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:32:24 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:32:24 | ERROR | stderr |     yield
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:32:24 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:32:24 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:32:24 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:32:24 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:32:24 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:32:24 | ERROR | stderr | 
2023-11-15 10:32:24 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:32:24 | ERROR | stderr | 
2023-11-15 10:32:24 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:32:24 | ERROR | stderr |     yield
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:32:24 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:32:24 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:32:24 | ERROR | stderr |     raise exc
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:32:24 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:32:24 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:32:24 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:32:24 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:32:24 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:32:24 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:32:24 | ERROR | stderr | 
2023-11-15 10:32:24 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:32:24 | ERROR | stderr | 
2023-11-15 10:32:24 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:32:24 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     raise exc
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     raise exc
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     raise e
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:32:24 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:32:24 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:32:24 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:32:24 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:32:24 | ERROR | stderr |     await func()
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:32:24 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:32:24 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:32:24 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:32:24 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:32:24 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:32:24 | ERROR | stderr |     yield part
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:32:24 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:32:24 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:32:24 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:32:24 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:33:17 | INFO | stdout | [32mINFO[0m:     127.0.0.1:34320 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:33:17 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:33:17 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:33:17 | ERROR | stderr |     yield
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:33:17 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:33:17 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:33:17 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:33:17 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:33:17 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:33:17 | ERROR | stderr | 
2023-11-15 10:33:17 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:33:17 | ERROR | stderr | 
2023-11-15 10:33:17 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:33:17 | ERROR | stderr |     yield
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:33:17 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:33:17 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:33:17 | ERROR | stderr |     raise exc
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:33:17 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:33:17 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:33:17 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:33:17 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:33:17 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:33:17 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:33:17 | ERROR | stderr | 
2023-11-15 10:33:17 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:33:17 | ERROR | stderr | 
2023-11-15 10:33:17 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:33:17 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     raise exc
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     raise exc
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     raise e
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:33:17 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:33:17 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:33:17 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:33:17 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:33:17 | ERROR | stderr |     await func()
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:33:17 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:33:17 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:33:17 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:33:17 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:33:17 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:33:17 | ERROR | stderr |     yield part
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:33:17 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:33:17 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:33:17 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:33:17 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:33:38 | INFO | stdout | [32mINFO[0m:     127.0.0.1:37980 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:35:11 | INFO | stdout | [32mINFO[0m:     127.0.0.1:53026 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:35:18 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:35:18 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 34, in read
2023-11-15 10:35:18 | ERROR | stderr |     return await self._stream.receive(max_bytes=max_bytes)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 1203, in receive
2023-11-15 10:35:18 | ERROR | stderr |     await self._protocol.read_event.wait()
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/asyncio/locks.py", line 309, in wait
2023-11-15 10:35:18 | ERROR | stderr |     await fut
2023-11-15 10:35:18 | ERROR | stderr | asyncio.exceptions.CancelledError
2023-11-15 10:35:18 | ERROR | stderr | 
2023-11-15 10:35:18 | ERROR | stderr | During handling of the above exception, another exception occurred:
2023-11-15 10:35:18 | ERROR | stderr | 
2023-11-15 10:35:18 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:35:18 | ERROR | stderr |     yield
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 10:35:18 | ERROR | stderr |     return b""
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_core/_tasks.py", line 119, in __exit__
2023-11-15 10:35:18 | ERROR | stderr |     raise TimeoutError
2023-11-15 10:35:18 | ERROR | stderr | TimeoutError
2023-11-15 10:35:18 | ERROR | stderr | 
2023-11-15 10:35:18 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:35:18 | ERROR | stderr | 
2023-11-15 10:35:18 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:35:18 | ERROR | stderr |     yield
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     raise exc
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     response = await connection.handle_async_request(request)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection.py", line 96, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     return await self._connection.handle_async_request(request)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 121, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     raise exc
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 99, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     ) = await self._receive_response_headers(**kwargs)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 164, in _receive_response_headers
2023-11-15 10:35:18 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 200, in _receive_event
2023-11-15 10:35:18 | ERROR | stderr |     data = await self._network_stream.read(
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 10:35:18 | ERROR | stderr |     return b""
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:35:18 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:35:18 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:35:18 | ERROR | stderr | httpcore.ReadTimeout
2023-11-15 10:35:18 | ERROR | stderr | 
2023-11-15 10:35:18 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:35:18 | ERROR | stderr | 
2023-11-15 10:35:18 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:35:18 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     raise exc
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     raise exc
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     raise e
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:35:18 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:35:18 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:35:18 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:35:18 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:35:18 | ERROR | stderr |     await func()
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:35:18 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:35:18 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 583, in generate_completion_stream
2023-11-15 10:35:18 | ERROR | stderr |     async with client.stream(
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 171, in __aenter__
2023-11-15 10:35:18 | ERROR | stderr |     return await self.gen.__anext__()
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1573, in stream
2023-11-15 10:35:18 | ERROR | stderr |     response = await self.send(
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1617, in send
2023-11-15 10:35:18 | ERROR | stderr |     response = await self._send_handling_auth(
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
2023-11-15 10:35:18 | ERROR | stderr |     response = await self._send_handling_redirects(
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
2023-11-15 10:35:18 | ERROR | stderr |     response = await self._send_single_request(request)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1719, in _send_single_request
2023-11-15 10:35:18 | ERROR | stderr |     response = await transport.handle_async_request(request)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 10:35:18 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:35:18 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:35:18 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:35:18 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:35:18 | ERROR | stderr | httpx.ReadTimeout
2023-11-15 10:36:51 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:36:51 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 34, in read
2023-11-15 10:36:51 | ERROR | stderr |     return await self._stream.receive(max_bytes=max_bytes)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 1203, in receive
2023-11-15 10:36:51 | ERROR | stderr |     await self._protocol.read_event.wait()
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/asyncio/locks.py", line 309, in wait
2023-11-15 10:36:51 | ERROR | stderr |     await fut
2023-11-15 10:36:51 | ERROR | stderr | asyncio.exceptions.CancelledError
2023-11-15 10:36:51 | ERROR | stderr | 
2023-11-15 10:36:51 | ERROR | stderr | During handling of the above exception, another exception occurred:
2023-11-15 10:36:51 | ERROR | stderr | 
2023-11-15 10:36:51 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:36:51 | ERROR | stderr |     yield
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 10:36:51 | ERROR | stderr |     return b""
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_core/_tasks.py", line 119, in __exit__
2023-11-15 10:36:51 | ERROR | stderr |     raise TimeoutError
2023-11-15 10:36:51 | ERROR | stderr | TimeoutError
2023-11-15 10:36:51 | ERROR | stderr | 
2023-11-15 10:36:51 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:36:51 | ERROR | stderr | 
2023-11-15 10:36:51 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:36:51 | ERROR | stderr |     yield
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     raise exc
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     response = await connection.handle_async_request(request)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection.py", line 96, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     return await self._connection.handle_async_request(request)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 121, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     raise exc
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 99, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     ) = await self._receive_response_headers(**kwargs)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 164, in _receive_response_headers
2023-11-15 10:36:51 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 200, in _receive_event
2023-11-15 10:36:51 | ERROR | stderr |     data = await self._network_stream.read(
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 10:36:51 | ERROR | stderr |     return b""
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:36:51 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:36:51 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:36:51 | ERROR | stderr | httpcore.ReadTimeout
2023-11-15 10:36:51 | ERROR | stderr | 
2023-11-15 10:36:51 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:36:51 | ERROR | stderr | 
2023-11-15 10:36:51 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:36:51 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     raise exc
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     raise exc
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     raise e
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:36:51 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:36:51 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:36:51 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:36:51 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:36:51 | ERROR | stderr |     await func()
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:36:51 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:36:51 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 583, in generate_completion_stream
2023-11-15 10:36:51 | ERROR | stderr |     async with client.stream(
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 171, in __aenter__
2023-11-15 10:36:51 | ERROR | stderr |     return await self.gen.__anext__()
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1573, in stream
2023-11-15 10:36:51 | ERROR | stderr |     response = await self.send(
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1617, in send
2023-11-15 10:36:51 | ERROR | stderr |     response = await self._send_handling_auth(
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
2023-11-15 10:36:51 | ERROR | stderr |     response = await self._send_handling_redirects(
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
2023-11-15 10:36:51 | ERROR | stderr |     response = await self._send_single_request(request)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1719, in _send_single_request
2023-11-15 10:36:51 | ERROR | stderr |     response = await transport.handle_async_request(request)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 10:36:51 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:36:51 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:36:51 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:36:51 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:36:51 | ERROR | stderr | httpx.ReadTimeout
2023-11-15 10:37:17 | INFO | stdout | [32mINFO[0m:     127.0.0.1:37340 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:37:50 | INFO | stdout | [32mINFO[0m:     127.0.0.1:54506 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:38:46 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m568790[0m]
2023-11-15 10:38:46 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 10:38:46 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 10:38:46 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:30000[0m (Press CTRL+C to quit)
2023-11-15 10:40:07 | INFO | stdout | [32mINFO[0m:     127.0.0.1:33310 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:40:07 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:40:07 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:40:07 | ERROR | stderr |     yield
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:40:07 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:40:07 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:40:07 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:40:07 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:40:07 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:40:07 | ERROR | stderr | 
2023-11-15 10:40:07 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:40:07 | ERROR | stderr | 
2023-11-15 10:40:07 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:40:07 | ERROR | stderr |     yield
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:40:07 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:40:07 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:40:07 | ERROR | stderr |     raise exc
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:40:07 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:40:07 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:40:07 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:40:07 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:40:07 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:40:07 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:40:07 | ERROR | stderr | 
2023-11-15 10:40:07 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:40:07 | ERROR | stderr | 
2023-11-15 10:40:07 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:40:07 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     raise exc
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     raise exc
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     raise e
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:40:07 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:40:07 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:40:07 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:40:07 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:40:07 | ERROR | stderr |     await func()
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:40:07 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:40:07 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:40:07 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:40:07 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:40:07 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:40:07 | ERROR | stderr |     yield part
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:40:07 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:40:07 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:40:07 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:40:07 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:40:37 | INFO | stdout | [32mINFO[0m:     127.0.0.1:38404 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:40:37 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:40:37 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:40:37 | ERROR | stderr |     yield
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:40:37 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:40:37 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:40:37 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:40:37 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:40:37 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:40:37 | ERROR | stderr | 
2023-11-15 10:40:37 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:40:37 | ERROR | stderr | 
2023-11-15 10:40:37 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:40:37 | ERROR | stderr |     yield
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:40:37 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:40:37 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:40:37 | ERROR | stderr |     raise exc
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:40:37 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:40:37 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:40:37 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:40:37 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:40:37 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:40:37 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:40:37 | ERROR | stderr | 
2023-11-15 10:40:37 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:40:37 | ERROR | stderr | 
2023-11-15 10:40:37 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:40:37 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     raise exc
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     raise exc
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     raise e
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:40:37 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:40:37 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:40:37 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:40:37 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:40:37 | ERROR | stderr |     await func()
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:40:37 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:40:37 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:40:37 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:40:37 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:40:37 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:40:37 | ERROR | stderr |     yield part
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:40:37 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:40:37 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:40:37 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:40:37 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:41:14 | INFO | stdout | [32mINFO[0m:     127.0.0.1:43500 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:41:14 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:41:14 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:41:14 | ERROR | stderr |     yield
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:41:14 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:41:14 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:41:14 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:41:14 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:41:14 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:41:14 | ERROR | stderr | 
2023-11-15 10:41:14 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:41:14 | ERROR | stderr | 
2023-11-15 10:41:14 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:41:14 | ERROR | stderr |     yield
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:41:14 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:41:14 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:41:14 | ERROR | stderr |     raise exc
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:41:14 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:41:14 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:41:14 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:41:14 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:41:14 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:41:14 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:41:14 | ERROR | stderr | 
2023-11-15 10:41:14 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:41:14 | ERROR | stderr | 
2023-11-15 10:41:14 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:41:14 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     raise exc
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     raise exc
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     raise e
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:41:14 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:41:14 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:41:14 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:41:14 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:41:14 | ERROR | stderr |     await func()
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:41:14 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:41:14 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:41:14 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:41:14 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:41:14 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:41:14 | ERROR | stderr |     yield part
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:41:14 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:41:14 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:41:14 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:41:14 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:41:25 | INFO | stdout | [32mINFO[0m:     127.0.0.1:48968 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:41:26 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 10:41:26 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 10:41:26 | ERROR | stderr |     yield
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:41:26 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 10:41:26 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 10:41:26 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 10:41:26 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 10:41:26 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:41:26 | ERROR | stderr | 
2023-11-15 10:41:26 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:41:26 | ERROR | stderr | 
2023-11-15 10:41:26 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 10:41:26 | ERROR | stderr |     yield
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 10:41:26 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 10:41:26 | ERROR | stderr |     async for part in self._stream:
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 10:41:26 | ERROR | stderr |     raise exc
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 10:41:26 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 10:41:26 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 10:41:26 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:41:26 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 10:41:26 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 10:41:26 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:41:26 | ERROR | stderr | 
2023-11-15 10:41:26 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 10:41:26 | ERROR | stderr | 
2023-11-15 10:41:26 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 10:41:26 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     raise exc
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     raise exc
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     raise e
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 10:41:26 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 10:41:26 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 10:41:26 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 10:41:26 | ERROR | stderr |     raise exceptions[0]
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 10:41:26 | ERROR | stderr |     await func()
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 10:41:26 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 10:41:26 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 10:41:26 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 10:41:26 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 10:41:26 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 10:41:26 | ERROR | stderr |     yield part
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 10:41:26 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 10:41:26 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 10:41:26 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 10:41:26 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 10:43:00 | INFO | stdout | [32mINFO[0m:     127.0.0.1:39286 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:43:38 | INFO | stdout | [32mINFO[0m:     127.0.0.1:52478 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:43:53 | INFO | stdout | [32mINFO[0m:     127.0.0.1:42044 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 10:54:52 | INFO | stdout | [32mINFO[0m:     127.0.0.1:38586 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:33:04 | INFO | stdout | [32mINFO[0m:     127.0.0.1:53574 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:33:16 | INFO | stdout | [32mINFO[0m:     127.0.0.1:59432 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:36:30 | INFO | stdout | [32mINFO[0m:     127.0.0.1:33112 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:36:56 | INFO | stdout | [32mINFO[0m:     127.0.0.1:46826 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:37:43 | INFO | stdout | [32mINFO[0m:     127.0.0.1:42638 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:38:19 | INFO | stdout | [32mINFO[0m:     127.0.0.1:37774 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:38:41 | INFO | stdout | [32mINFO[0m:     127.0.0.1:47218 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:39:20 | INFO | stdout | [32mINFO[0m:     127.0.0.1:41758 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:41:25 | INFO | stdout | [32mINFO[0m:     127.0.0.1:48852 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:41:25 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 11:41:25 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 11:41:25 | ERROR | stderr |     yield
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:41:25 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 11:41:25 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 11:41:25 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 11:41:25 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 11:41:25 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:41:25 | ERROR | stderr | 
2023-11-15 11:41:25 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:41:25 | ERROR | stderr | 
2023-11-15 11:41:25 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 11:41:25 | ERROR | stderr |     yield
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 11:41:25 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 11:41:25 | ERROR | stderr |     async for part in self._stream:
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 11:41:25 | ERROR | stderr |     raise exc
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 11:41:25 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 11:41:25 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:41:25 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:41:25 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 11:41:25 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 11:41:25 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:41:25 | ERROR | stderr | 
2023-11-15 11:41:25 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:41:25 | ERROR | stderr | 
2023-11-15 11:41:25 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 11:41:25 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     raise exc
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     raise exc
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     raise e
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 11:41:25 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 11:41:25 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 11:41:25 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 11:41:25 | ERROR | stderr |     raise exceptions[0]
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 11:41:25 | ERROR | stderr |     await func()
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 11:41:25 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 11:41:25 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 11:41:25 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 11:41:25 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 11:41:25 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 11:41:25 | ERROR | stderr |     yield part
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:41:25 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:41:25 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 11:41:25 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 11:41:25 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:42:10 | INFO | stdout | [32mINFO[0m:     127.0.0.1:36510 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:43:08 | INFO | stdout | [32mINFO[0m:     127.0.0.1:52074 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:43:50 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 11:43:50 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 34, in read
2023-11-15 11:43:50 | ERROR | stderr |     return await self._stream.receive(max_bytes=max_bytes)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 1203, in receive
2023-11-15 11:43:50 | ERROR | stderr |     await self._protocol.read_event.wait()
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/asyncio/locks.py", line 309, in wait
2023-11-15 11:43:50 | ERROR | stderr |     await fut
2023-11-15 11:43:50 | ERROR | stderr | asyncio.exceptions.CancelledError
2023-11-15 11:43:50 | ERROR | stderr | 
2023-11-15 11:43:50 | ERROR | stderr | During handling of the above exception, another exception occurred:
2023-11-15 11:43:50 | ERROR | stderr | 
2023-11-15 11:43:50 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 11:43:50 | ERROR | stderr |     yield
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 11:43:50 | ERROR | stderr |     return b""
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_core/_tasks.py", line 119, in __exit__
2023-11-15 11:43:50 | ERROR | stderr |     raise TimeoutError
2023-11-15 11:43:50 | ERROR | stderr | TimeoutError
2023-11-15 11:43:50 | ERROR | stderr | 
2023-11-15 11:43:50 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:43:50 | ERROR | stderr | 
2023-11-15 11:43:50 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 11:43:50 | ERROR | stderr |     yield
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     raise exc
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     response = await connection.handle_async_request(request)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection.py", line 96, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     return await self._connection.handle_async_request(request)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 121, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     raise exc
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 99, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     ) = await self._receive_response_headers(**kwargs)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 164, in _receive_response_headers
2023-11-15 11:43:50 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 200, in _receive_event
2023-11-15 11:43:50 | ERROR | stderr |     data = await self._network_stream.read(
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 11:43:50 | ERROR | stderr |     return b""
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:43:50 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 11:43:50 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 11:43:50 | ERROR | stderr | httpcore.ReadTimeout
2023-11-15 11:43:50 | ERROR | stderr | 
2023-11-15 11:43:50 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:43:50 | ERROR | stderr | 
2023-11-15 11:43:50 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 11:43:50 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     raise exc
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     raise exc
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     raise e
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 11:43:50 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 11:43:50 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 11:43:50 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 11:43:50 | ERROR | stderr |     raise exceptions[0]
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 11:43:50 | ERROR | stderr |     await func()
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 11:43:50 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 11:43:50 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 583, in generate_completion_stream
2023-11-15 11:43:50 | ERROR | stderr |     async with client.stream(
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 171, in __aenter__
2023-11-15 11:43:50 | ERROR | stderr |     return await self.gen.__anext__()
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1573, in stream
2023-11-15 11:43:50 | ERROR | stderr |     response = await self.send(
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1617, in send
2023-11-15 11:43:50 | ERROR | stderr |     response = await self._send_handling_auth(
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
2023-11-15 11:43:50 | ERROR | stderr |     response = await self._send_handling_redirects(
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
2023-11-15 11:43:50 | ERROR | stderr |     response = await self._send_single_request(request)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1719, in _send_single_request
2023-11-15 11:43:50 | ERROR | stderr |     response = await transport.handle_async_request(request)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 11:43:50 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:43:50 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:43:50 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 11:43:50 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 11:43:50 | ERROR | stderr | httpx.ReadTimeout
2023-11-15 11:44:18 | INFO | stdout | [32mINFO[0m:     127.0.0.1:58266 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:44:25 | INFO | stdout | [32mINFO[0m:     127.0.0.1:33592 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:44:35 | INFO | stdout | [32mINFO[0m:     127.0.0.1:50644 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:44:48 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 11:44:48 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 34, in read
2023-11-15 11:44:48 | ERROR | stderr |     return await self._stream.receive(max_bytes=max_bytes)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 1203, in receive
2023-11-15 11:44:48 | ERROR | stderr |     await self._protocol.read_event.wait()
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/asyncio/locks.py", line 309, in wait
2023-11-15 11:44:48 | ERROR | stderr |     await fut
2023-11-15 11:44:48 | ERROR | stderr | asyncio.exceptions.CancelledError
2023-11-15 11:44:48 | ERROR | stderr | 
2023-11-15 11:44:48 | ERROR | stderr | During handling of the above exception, another exception occurred:
2023-11-15 11:44:48 | ERROR | stderr | 
2023-11-15 11:44:48 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 11:44:48 | ERROR | stderr |     yield
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 11:44:48 | ERROR | stderr |     return b""
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_core/_tasks.py", line 119, in __exit__
2023-11-15 11:44:48 | ERROR | stderr |     raise TimeoutError
2023-11-15 11:44:48 | ERROR | stderr | TimeoutError
2023-11-15 11:44:48 | ERROR | stderr | 
2023-11-15 11:44:48 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:44:48 | ERROR | stderr | 
2023-11-15 11:44:48 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 11:44:48 | ERROR | stderr |     yield
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 262, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     raise exc
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 245, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     response = await connection.handle_async_request(request)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection.py", line 96, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     return await self._connection.handle_async_request(request)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 121, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     raise exc
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 99, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     ) = await self._receive_response_headers(**kwargs)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 164, in _receive_response_headers
2023-11-15 11:44:48 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 200, in _receive_event
2023-11-15 11:44:48 | ERROR | stderr |     data = await self._network_stream.read(
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_backends/anyio.py", line 36, in read
2023-11-15 11:44:48 | ERROR | stderr |     return b""
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:44:48 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 11:44:48 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 11:44:48 | ERROR | stderr | httpcore.ReadTimeout
2023-11-15 11:44:48 | ERROR | stderr | 
2023-11-15 11:44:48 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:44:48 | ERROR | stderr | 
2023-11-15 11:44:48 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 11:44:48 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     raise exc
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     raise exc
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     raise e
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 11:44:48 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 11:44:48 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 11:44:48 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 11:44:48 | ERROR | stderr |     raise exceptions[0]
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 11:44:48 | ERROR | stderr |     await func()
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 11:44:48 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 11:44:48 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 583, in generate_completion_stream
2023-11-15 11:44:48 | ERROR | stderr |     async with client.stream(
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 171, in __aenter__
2023-11-15 11:44:48 | ERROR | stderr |     return await self.gen.__anext__()
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1573, in stream
2023-11-15 11:44:48 | ERROR | stderr |     response = await self.send(
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1617, in send
2023-11-15 11:44:48 | ERROR | stderr |     response = await self._send_handling_auth(
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1645, in _send_handling_auth
2023-11-15 11:44:48 | ERROR | stderr |     response = await self._send_handling_redirects(
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1682, in _send_handling_redirects
2023-11-15 11:44:48 | ERROR | stderr |     response = await self._send_single_request(request)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 1719, in _send_single_request
2023-11-15 11:44:48 | ERROR | stderr |     response = await transport.handle_async_request(request)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 353, in handle_async_request
2023-11-15 11:44:48 | ERROR | stderr |     resp = await self._pool.handle_async_request(req)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:44:48 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:44:48 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 11:44:48 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 11:44:48 | ERROR | stderr | httpx.ReadTimeout
2023-11-15 11:45:46 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m703575[0m]
2023-11-15 11:45:46 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2023-11-15 11:45:46 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2023-11-15 11:45:46 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://0.0.0.0:30000[0m (Press CTRL+C to quit)
2023-11-15 11:47:55 | INFO | stdout | [32mINFO[0m:     127.0.0.1:42662 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:47:55 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 11:47:55 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 11:47:55 | ERROR | stderr |     yield
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:47:55 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 11:47:55 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 11:47:55 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 11:47:55 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 11:47:55 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:47:55 | ERROR | stderr | 
2023-11-15 11:47:55 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:47:55 | ERROR | stderr | 
2023-11-15 11:47:55 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 11:47:55 | ERROR | stderr |     yield
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 11:47:55 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 11:47:55 | ERROR | stderr |     async for part in self._stream:
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 11:47:55 | ERROR | stderr |     raise exc
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 11:47:55 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 11:47:55 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:47:55 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:47:55 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 11:47:55 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 11:47:55 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:47:55 | ERROR | stderr | 
2023-11-15 11:47:55 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:47:55 | ERROR | stderr | 
2023-11-15 11:47:55 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 11:47:55 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     raise exc
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     raise exc
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     raise e
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 11:47:55 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 11:47:55 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 11:47:55 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 11:47:55 | ERROR | stderr |     raise exceptions[0]
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 11:47:55 | ERROR | stderr |     await func()
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 11:47:55 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 11:47:55 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 11:47:55 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 11:47:55 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 11:47:55 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 11:47:55 | ERROR | stderr |     yield part
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:47:55 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:47:55 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 11:47:55 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 11:47:55 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:52:20 | INFO | stdout | [32mINFO[0m:     127.0.0.1:39988 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:54:04 | INFO | stdout | [32mINFO[0m:     127.0.0.1:55226 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:54:04 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 11:54:04 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 11:54:04 | ERROR | stderr |     yield
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:54:04 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 11:54:04 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 11:54:04 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 11:54:04 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 11:54:04 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:54:04 | ERROR | stderr | 
2023-11-15 11:54:04 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:54:04 | ERROR | stderr | 
2023-11-15 11:54:04 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 11:54:04 | ERROR | stderr |     yield
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 11:54:04 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 11:54:04 | ERROR | stderr |     async for part in self._stream:
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 11:54:04 | ERROR | stderr |     raise exc
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 11:54:04 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 11:54:04 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:54:04 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:54:04 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 11:54:04 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 11:54:04 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:54:04 | ERROR | stderr | 
2023-11-15 11:54:04 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:54:04 | ERROR | stderr | 
2023-11-15 11:54:04 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 11:54:04 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     raise exc
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     raise exc
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     raise e
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 11:54:04 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 11:54:04 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 11:54:04 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 11:54:04 | ERROR | stderr |     raise exceptions[0]
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 11:54:04 | ERROR | stderr |     await func()
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 11:54:04 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 11:54:04 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 11:54:04 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 11:54:04 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 11:54:04 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 11:54:04 | ERROR | stderr |     yield part
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:54:04 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:54:04 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 11:54:04 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 11:54:04 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:54:33 | INFO | stdout | [32mINFO[0m:     127.0.0.1:60548 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2023-11-15 11:54:33 | ERROR | stderr | [31mERROR[0m:    Exception in ASGI application
2023-11-15 11:54:33 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 10, in map_exceptions
2023-11-15 11:54:33 | ERROR | stderr |     yield
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:54:33 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 469, in next_event
2023-11-15 11:54:33 | ERROR | stderr |     event = self._extract_next_receive_event()
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_connection.py", line 419, in _extract_next_receive_event
2023-11-15 11:54:33 | ERROR | stderr |     event = self._reader.read_eof()  # type: ignore[attr-defined]
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/h11/_readers.py", line 204, in read_eof
2023-11-15 11:54:33 | ERROR | stderr |     raise RemoteProtocolError(
2023-11-15 11:54:33 | ERROR | stderr | h11._util.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:54:33 | ERROR | stderr | 
2023-11-15 11:54:33 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:54:33 | ERROR | stderr | 
2023-11-15 11:54:33 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 60, in map_httpcore_exceptions
2023-11-15 11:54:33 | ERROR | stderr |     yield
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 239, in __aiter__
2023-11-15 11:54:33 | ERROR | stderr |     async for part in self._httpcore_stream:
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/connection_pool.py", line 347, in __aiter__
2023-11-15 11:54:33 | ERROR | stderr |     async for part in self._stream:
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 325, in __aiter__
2023-11-15 11:54:33 | ERROR | stderr |     raise exc
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 317, in __aiter__
2023-11-15 11:54:33 | ERROR | stderr |     async for chunk in self._connection._receive_response_body(**kwargs):
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 186, in _receive_response_body
2023-11-15 11:54:33 | ERROR | stderr |     event = await self._receive_event(timeout=timeout)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_async/http11.py", line 197, in _receive_event
2023-11-15 11:54:33 | ERROR | stderr |     event = self._h11_state.next_event()
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:54:33 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2023-11-15 11:54:33 | ERROR | stderr |     raise to_exc(exc) from exc
2023-11-15 11:54:33 | ERROR | stderr | httpcore.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:54:33 | ERROR | stderr | 
2023-11-15 11:54:33 | ERROR | stderr | The above exception was the direct cause of the following exception:
2023-11-15 11:54:33 | ERROR | stderr | 
2023-11-15 11:54:33 | ERROR | stderr | Traceback (most recent call last):
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
2023-11-15 11:54:33 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/applications.py", line 1106, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     raise exc
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/cors.py", line 83, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     raise exc
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     raise e
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
2023-11-15 11:54:33 | ERROR | stderr |     await self.app(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/routing.py", line 69, in app
2023-11-15 11:54:33 | ERROR | stderr |     await response(scope, receive, send)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 277, in __call__
2023-11-15 11:54:33 | ERROR | stderr |     await wrap(partial(self.listen_for_disconnect, receive))
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/anyio/_backends/_asyncio.py", line 597, in __aexit__
2023-11-15 11:54:33 | ERROR | stderr |     raise exceptions[0]
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 273, in wrap
2023-11-15 11:54:33 | ERROR | stderr |     await func()
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/starlette/responses.py", line 262, in stream_response
2023-11-15 11:54:33 | ERROR | stderr |     async for chunk in self.body_iterator:
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 422, in chat_completion_stream_generator
2023-11-15 11:54:33 | ERROR | stderr |     async for content in generate_completion_stream(gen_params, worker_addr):
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/fastchat/serve/openai_api_server.py", line 592, in generate_completion_stream
2023-11-15 11:54:33 | ERROR | stderr |     async for raw_chunk in response.aiter_raw():
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_models.py", line 985, in aiter_raw
2023-11-15 11:54:33 | ERROR | stderr |     async for raw_stream_bytes in self.stream:
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_client.py", line 146, in __aiter__
2023-11-15 11:54:33 | ERROR | stderr |     async for chunk in self._stream:
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 240, in __aiter__
2023-11-15 11:54:33 | ERROR | stderr |     yield part
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/contextlib.py", line 131, in __exit__
2023-11-15 11:54:33 | ERROR | stderr |     self.gen.throw(type, value, traceback)
2023-11-15 11:54:33 | ERROR | stderr |   File "/usr/local/anaconda3/envs/langchain/lib/python3.8/site-packages/httpx/_transports/default.py", line 77, in map_httpcore_exceptions
2023-11-15 11:54:33 | ERROR | stderr |     raise mapped_exc(message) from exc
2023-11-15 11:54:33 | ERROR | stderr | httpx.RemoteProtocolError: peer closed connection without sending complete message body (incomplete chunked read)
2023-11-15 11:55:41 | INFO | stdout | [32mINFO[0m:     127.0.0.1:53926 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
